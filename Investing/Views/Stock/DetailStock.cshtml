@model Investing.Models.Stocks
<link rel="stylesheet" href="~/css/detail_stock.css" />
<script src="~/js/detail_stock.js"></script>
<script src="~/js/candles_history.js"></script>
<div class="main_board">
    <div class="main-section">
        <div class="section">
         <div class="logo-name-main">
                    @if (!(Model.Security.IconCompany is null))
                    {
                        <img src="@String.Format("data:image/gif;base64,{0}", Convert.ToBase64String(Model.Security.IconCompany))" class="company-logo">
                    }
                    else
                    {
                        <img src="~/images/logo.jpg" class="company-logo" />
                    }
                <div class="name-company">
                    <h2>@Model.Security.SHORTNAME</h2>
                </div>
      </div>
     </div>
    <div class="section">
        <div class="price-now">
            <div class="info-price">
                <p>Цена</p>
                <h4> @Model.Marketdata.OFFER</h4>
            </div>
         </div>
            <div class="change-price">
                <div class="select-price">
                    <p>Изменение за день</p>
                    <div class="change-price-num-persent">
                        <h6 class="change-price-num" id="change-price-num"></h6>
                        <h6 id="change-price-persent"></h6>
                    </div>
                </div>
            </div>
         <div class="type-instrument">
                <p>Акция</p>
         </div>
            <div class="lot-size">
                <p>Лот = @Model.Security.LOTSIZE шт.</p>
            </div>
         <div class="sec-id-company">
                <p id="secid-name-p">@Model.Security.SECID</p>
         </div>
    </div>
            <div class="section">
            <div class="diagram-instruments">
                <div class="diagram-chart-section" >
                            <div class="preloader" id="chart-preloader">
                                <div class="spinner">
                                    <i class="fa-solid fa-spinner"></i>
                                </div>
                                <p>Загрузка данных...</p>
                            </div>
                        <canvas id="chart-instruments"></canvas>
                    </div>
                        <div class="date-diagram">
                        <div class="section-btn-date-diagram">
                                <button onclick="getGlassOrdersToday()" id="btn_diagram_1d" class="btn-date-diagram" href="#">1 д</button>
                                <button onclick="getGlassOrders(event)" id="btn_diagram_1w" class="btn-date-diagram" href="#">1 н</button>
                                <button onclick="getGlassOrders(event)" id="btn_diagram_1m" class="btn-date-diagram" href="#">1 м</button>
                                <button onclick="getGlassOrders(event)" id="btn_diagram_3m" class="btn-date-diagram" href="#">3 м</button>
                                <button onclick="getGlassOrders(event)" id="btn_diagram_6m" class="btn-date-diagram" href="#">6 м</button>
                                <button onclick="getGlassOrders(event)" id="btn_diagram_1y" class="btn-date-diagram" href="#">1 г</button>
                           </div> 
                        </div>
                </div>
            </div>
            <div class="section not-space">
                <div class="glass-trading">
                    <div class="up-section-glass-trading">
                        <h5>Стакан</h5>
                         <button class="btn-detail-glass">Показать подробно</button>
                    </div>
                    <div class="down-section-glass-trading">
                             <div class="demand-section">
                                  Спрос, Р
                                 <progress class="progress-demand" id="progress-demand" max="100" value="70">70%</progress>
                              </div>
                                   <div class="offer-section">
                                    Предлжение, Р
                            <progress class="progress-offer" id="progress-offer" max="100" value="70">70%</progress>
                                </div>
                    </div>
                    @* стакан со спросом и предложением *@
                </div>
                <div class="btn-instrument">
                    <div class="btn-buy-instrument">
                    <button class="btn-buy">Купить</button>
                    </div>
                    <div class="btn-sell-instrument">
                    <button class="btn-sell">Продать</button>
                    </div>
                </div>
            </div>
            <div class="section">
            <div class="statistics-today-section">
                <div class="statistics-today-name">
                    <h2>Ключевая статистика за сегодня</h2>
                </div>
                <div class="statistics-today-details">
                    <div class="left-statistics-today">
                        <p>Цена закрытия:  @Model.Security.PREVLEGALCLOSEPRICE</p>
                        <p>Цена закрытия:  @Model.Marketdata.OPEN</p>
                        <p>Количество акций в обращении:  @Model.Security.ISSUESIZE</p>
                    </div>
                    <div class="right-statistics-today">
                        <p>Минимальная цена:  @Model.Marketdata.LOW</p>
                        <p>Максимальная цена:  @Model.Marketdata.HIGH</p>
                        <p>Количество сделок за сегодня:  @Model.Marketdata.NUMTRADES</p>
                    </div>
                </div>
                </div>
            </div>
    
    </div>
</div>
<script>
    var allInstruments = @Html.Raw(Json.Serialize(Model));

</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>